<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>üîç Detectar Modelos Disponibles</title>
    <style>
        body {
            font-family: monospace;
            background: #1a1a2e;
            color: #e0e0e0;
            padding: 2rem;
        }
        .section { background: #16213e; padding: 1.5rem; margin: 1rem 0; border-radius: 4px; border-left: 4px solid #4fd1c5; }
        input { width: 100%; padding: 0.75rem; margin: 0.5rem 0; background: #0f3460; border: 1px solid #4fd1c5; color: #e0e0e0; border-radius: 4px; }
        button { background: #4fd1c5; color: #1a1a2e; border: none; padding: 0.75rem 1.5rem; border-radius: 4px; cursor: pointer; font-weight: bold; margin: 0.5rem; }
        .ok { color: #4fd1c5; }
        .error { color: #e95555; }
        pre { background: #0f3460; padding: 1rem; border-radius: 4px; overflow-x: auto; max-height: 400px; }
    </style>
</head>
<body>
    <h1>üîç Detectar Modelos Disponibles</h1>
    
    <div class="section">
        <h3>1. Ingresa tu API Key:</h3>
        <input type="password" id="apiKey" placeholder="AIzaSy..." autocomplete="off">
        <button onclick="testModels()">üîç Probar modelos disponibles</button>
    </div>
    
    <div class="section">
        <h3>2. Resultados:</h3>
        <pre id="results">Ingresa tu API key y haz click en el bot√≥n...</pre>
    </div>

    <script>
        async function testModels() {
            const apiKey = document.getElementById('apiKey').value.trim();
            const results = document.getElementById('results');
            
            if (!apiKey) {
                results.innerHTML = '‚ùå Por favor ingresa una API key';
                return;
            }
            
            results.innerHTML = '‚è≥ Probando modelos...\n';
            
            const modelsToTest = [
                'gemini-pro',
                'gemini-1.5-pro',
                'gemini-1.5-flash',
                'gemini-1.0-pro',
                'text-bison',
                'text-davinci-003',
                'gpt-3.5-turbo'
            ];
            
            for (const model of modelsToTest) {
                await testModel(apiKey, model, results);
            }
            
            results.innerHTML += '\n‚úÖ Pruebas completadas\n';
        }
        
        async function testModel(apiKey, model, resultsElement) {
            const versions = ['v1', 'v1beta'];
            
            for (const version of versions) {
                const url = `https://generativelanguage.googleapis.com/${version}/models/${model}:generateContent?key=${apiKey}`;
                
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{ text: 'test' }]
                            }]
                        })
                    });
                    
                    if (response.ok) {
                        resultsElement.innerHTML += `‚úÖ ${model} (${version}): DISPONIBLE\n`;
                    } else {
                        const error = await response.json();
                        if (error.error?.code === 404) {
                            resultsElement.innerHTML += `‚ùå ${model} (${version}): No disponible\n`;
                        } else {
                            resultsElement.innerHTML += `‚ö†Ô∏è  ${model} (${version}): ${error.error?.message || 'Error desconocido'}\n`;
                        }
                    }
                } catch (err) {
                    resultsElement.innerHTML += `‚ùå ${model} (${version}): Error de red\n`;
                }
                
                // Peque√±o delay para no sobrecargar
                await new Promise(r => setTimeout(r, 500));
            }
        }
    </script>
</body>
</html>
