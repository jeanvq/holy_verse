<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>HolyVerse - Universo B√≠blico Interactivo</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Explora historias, contextos y conexiones sagradas de la Biblia">
    <meta name="theme-color" content="#4fd1c5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="HolyVerse">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="assets/icons/icon-192x192.png">
    
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/grid.css">
    <link rel="stylesheet" href="css/bot.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="css/donations.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <img src="assets/images/logo.png" alt="HolyVerse" class="logo-img">
                <h1>HolyVerse</h1>
            </div>
            <div class="nav-controls">
                <button id="themeToggle" class="theme-btn" title="Cambiar tema">üåô</button>
                <button id="botToggle" class="bot-btn" title="Abre el Bible Bot">
                    <span class="bot-icon">‚ö°</span>
                </button>
                <div class="lang-selector">
                    <button id="langES" class="lang-btn active" data-lang="es">ES</button>
                    <button id="langEN" class="lang-btn" data-lang="en">EN</button>
                </div>
                <!-- Auth Container -->
                <div id="authContainer" style="display: flex; gap: 0.5rem;">
                    <button id="loginBtn" class="primary-btn" style="display: none;">Iniciar Sesi√≥n</button>
                </div>
                <!-- User Menu -->
                <div id="userMenu" style="display: none; gap: 1rem; align-items: center;">
                    <div class="user-avatar" id="userAvatar">üë§</div>
                    <div class="user-info">
                        <span class="user-name" id="userName">Usuario</span>
                        <span class="user-status">En l√≠nea</span>
                    </div>
                    <button id="logoutBtn" style="display: none;">Salir</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <main class="main-container">
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-content">
                <h2 data-i18n="hero.title">Universo B√≠blico Interactivo</h2>
                <p data-i18n="hero.subtitle">Explora historias, contextos y conexiones sagradas</p>
                <div class="hero-cta">
                    <button id="heroExplore" class="primary-btn" data-i18n="hero.cta.explore">Explorar hoy</button>
                    <button id="heroSurprise" class="ghost-btn" data-i18n="hero.cta.surprise">Verso sorpresa</button>
                </div>
                <div id="heroStats" class="hero-stats"></div>
            </div>
        </section>

        <!-- Surprise Verse Modal -->
        <div id="surpriseVerseModal" class="modal hidden">
            <button class="modal-close" id="closeModal">&times;</button>
            <div class="modal-overlay" id="modalOverlay"></div>
            <div class="modal-content surprise-verse-modal">
                <div class="surprise-verse-container">
                    <h2>‚ú® Verso para Ti</h2>
                    <div class="surprise-verse-body">
                        <p id="surpriseVerseText" class="surprise-verse-text"></p>
                        <p id="surpriseVerseReference" class="surprise-verse-reference"></p>
                    </div>
                    <div class="surprise-verse-actions">
                        <button id="surpriseFavorite" class="action-btn favorite-btn" title="Guardar vers√≠culo">
                            <span class="icon">‚ô°</span>
                            <span class="label">Guardar</span>
                        </button>
                        <button id="surpriseShare" class="action-btn share-btn" title="Compartir vers√≠culo">
                            <span class="icon">‚Üó</span>
                            <span class="label">Compartir</span>
                        </button>
                    </div>
                    <div id="surpriseShareMenu" class="share-menu hidden">
                        <button id="surpriseShareTwitter" class="share-option" title="Compartir en Twitter">ùïè</button>
                        <button id="surpriseShareWhatsApp" class="share-option" title="Compartir en WhatsApp">üí¨</button>
                        <button id="surpriseShareFacebook" class="share-option" title="Compartir en Facebook">f</button>
                        <button id="surpriseShareCopy" class="share-option" title="Copiar al portapapeles">üìã</button>
                    </div>
                    <button id="newSurpriseVerse" class="primary-btn" style="width: 100%; margin-top: 20px;">
                        <span>‚Üª Otro verso</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Global Search -->
        <section class="search-section">
            <div class="search-header">
                <h3 data-i18n="search.title">Busca cualquier vers√≠culo</h3>
                <div class="search-meta">
                    <p data-i18n="search.subtitle">API o fallback local en ES/EN</p>
                    <span id="searchStatus" class="status-pill"></span>
                </div>
            </div>
            
            <!-- Search Bar -->
            <div class="search-bar">
                <input id="searchInput" type="text" placeholder="Juan 3:16 o 'amor'" data-i18n-placeholder="search.placeholder">
                <button id="voiceSearchBtn" class="voice-btn" title="B√∫squeda por voz">üé§</button>
                <button id="searchBtn" class="primary-btn search-btn" data-i18n="search.action">Buscar</button>
                <button id="advancedToggle" class="ghost-btn" title="Filtros avanzados">‚öôÔ∏è</button>
            </div>
            
            <!-- Advanced Filters -->
            <div id="advancedFilters" class="advanced-filters hidden">
                <div class="filter-row">
                    <div class="filter-group">
                        <label for="testamentFilter">Testamento:</label>
                        <select id="testamentFilter" class="filter-select">
                            <option value="all">Todos</option>
                            <option value="old">Antiguo</option>
                            <option value="new">Nuevo</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="bookFilter">Libro:</label>
                        <select id="bookFilter" class="filter-select">
                            <option value="all">Todos los libros</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="limitFilter">Resultados:</label>
                        <select id="limitFilter" class="filter-select">
                            <option value="10">10</option>
                            <option value="20" selected>20</option>
                            <option value="50">50</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>
                            <input type="checkbox" id="compareTranslations">
                            Comparar traducciones
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- Search History -->
            <div id="searchHistory" class="search-history hidden">
                <p class="history-label" data-i18n="search.history.title">B√∫squedas recientes:</p>
                <div id="historyList" class="history-list"></div>
            </div>
            
            <!-- Search Results -->
            <div id="searchResults" class="search-results"></div>
            
            <!-- Pagination -->
            <div id="searchPagination" class="search-pagination hidden">
                <button id="prevPage" class="ghost-btn" disabled>‚Üê Anterior</button>
                <span id="pageInfo" class="page-info">P√°gina 1</span>
                <button id="nextPage" class="ghost-btn">Siguiente ‚Üí</button>
            </div>
        </section>

        <!-- Daily Verse Card -->
        <section class="daily-verse-section">
            <div class="verse-card">
                <div class="verse-header">
                    <h3 data-i18n="daily.title">Vers√≠culo del D√≠a</h3>
                    <button id="refreshVerse" class="refresh-btn" title="Nuevo vers√≠culo">‚Üª</button>
                </div>
                <div class="verse-content">
                    <p id="verseText" class="verse-text"></p>
                    <p id="verseReference" class="verse-reference"></p>
                </div>
                <div class="verse-actions">
                    <button id="shareVerse" class="action-btn" data-i18n="daily.share">Compartir</button>
                    <button id="favoriteVerse" class="action-btn" data-i18n="daily.favorite">Guardar</button>
                </div>
                <div id="shareMenu" class="share-menu hidden">
                    <button id="shareTwitter" class="share-option" title="Compartir en Twitter">ùïè</button>
                    <button id="shareWhatsApp" class="share-option" title="Compartir en WhatsApp">üí¨</button>
                    <button id="shareFacebook" class="share-option" title="Compartir en Facebook">f</button>
                    <button id="shareCopy" class="share-option" title="Copiar al portapapeles">üìã</button>
                </div>
            </div>
        </section>

        <!-- Favorites -->
        <section class="favorites-section">
            <div class="favorites-header">
                <h3 data-i18n="favorites.title">Tus guardados</h3>
                <button id="favoritesToggle" class="ghost-btn" data-i18n="favorites.toggle">Ver guardados</button>
            </div>
            <div id="favoritesList" class="favorites-list hidden"></div>
        </section>

        <!-- Mood Bot Section -->
        <section class="mood-section">
            <div class="mood-container">
                <h3 data-i18n="mood.title">¬øC√≥mo te sientes hoy?</h3>
                <div class="mood-grid">
                    <button class="mood-btn" data-mood="hopeful" title="Esperanzado">
                        <span class="mood-emoji">üåÖ</span>
                        <span data-i18n="moods.hopeful">Esperanzado</span>
                    </button>
                    <button class="mood-btn" data-mood="anxious" title="Ansioso">
                        <span class="mood-emoji">üå™Ô∏è</span>
                        <span data-i18n="moods.anxious">Ansioso</span>
                    </button>
                    <button class="mood-btn" data-mood="grieving" title="Dolido">
                        <span class="mood-emoji">üåßÔ∏è</span>
                        <span data-i18n="moods.grieving">Dolido</span>
                    </button>
                    <button class="mood-btn" data-mood="joyful" title="Alegre">
                        <span class="mood-emoji">‚ú®</span>
                        <span data-i18n="moods.joyful">Alegre</span>
                    </button>
                    <button class="mood-btn" data-mood="confused" title="Confundido">
                        <span class="mood-emoji">üåÄ</span>
                        <span data-i18n="moods.confused">Confundido</span>
                    </button>
                    <button class="mood-btn" data-mood="peaceful" title="Tranquilo">
                        <span class="mood-emoji">üåø</span>
                        <span data-i18n="moods.peaceful">Tranquilo</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Exploration Grid -->
        <section class="exploration-section">
            <h3 data-i18n="explore.title">Explora el Universo</h3>
            <div class="exploration-grid">
                <div class="explore-card" data-section="books">
                    <div class="card-icon">üìñ</div>
                    <h4 data-i18n="explore.books">Libros</h4>
                    <p data-i18n="explore.books.desc">Navega por los 66 libros</p>
                </div>
                <div class="explore-card" data-section="characters">
                    <div class="card-icon">üë•</div>
                    <h4 data-i18n="explore.characters">Personajes</h4>
                    <p data-i18n="explore.characters.desc">Descubre historias √©picas</p>
                </div>
                <div class="explore-card" data-section="maps">
                    <div class="card-icon">üó∫Ô∏è</div>
                    <h4 data-i18n="explore.maps">Mapas</h4>
                    <p data-i18n="explore.maps.desc">Contexto geogr√°fico</p>
                </div>
                <div class="explore-card" data-section="timeline">
                    <div class="card-icon">‚è≥</div>
                    <h4 data-i18n="explore.timeline">L√≠nea de Tiempo</h4>
                    <p data-i18n="explore.timeline.desc">Conecta los eventos</p>
                </div>
            </div>
        </section>

        <!-- Exploration Sections (Hidden by default) -->
        <section id="booksSection" class="exploration-detail hidden">
            <button class="back-btn" onclick="closeExploration()">‚Üê <span class="back-label">Atr√°s</span></button>
            <h3 data-i18n="explore.books">Libros de la Biblia</h3>
            <div class="books-container">
                <div class="books-group">
                    <h4 id="otTitle">Antiguo Testamento (39 libros)</h4>
                    <div class="books-list" id="otBooks"></div>
                </div>
                <div class="books-group">
                    <h4 id="ntTitle">Nuevo Testamento (27 libros)</h4>
                    <div class="books-list" id="ntBooks"></div>
                </div>
            </div>
        </section>

        <section id="charactersSection" class="exploration-detail hidden">
            <button class="back-btn" onclick="closeExploration()">‚Üê <span class="back-label">Atr√°s</span></button>
            <h3 data-i18n="explore.characters">Personajes B√≠blicos</h3>
            <div id="charactersList" class="characters-grid"></div>
        </section>

        <section id="mapsSection" class="exploration-detail hidden">
            <button class="back-btn" onclick="closeExploration()">‚Üê <span class="back-label">Atr√°s</span></button>
            <h3 data-i18n="explore.maps">Mapa de Tierra Santa</h3>
            <div id="mapContainer" class="map-wrapper">
                <div id="map" class="map-canvas"></div>
                <div id="mapFallback" class="map-fallback hidden"></div>
                <p id="mapPlaceholder" class="map-note">Pr√≥ximamente: Mapa interactivo de Tierra Santa üó∫Ô∏è</p>
            </div>
        </section>

        <section id="timelineSection" class="exploration-detail hidden">
            <button class="back-btn" onclick="closeExploration()">‚Üê <span class="back-label">Atr√°s</span></button>
            <h3 data-i18n="explore.timeline">L√≠nea de Tiempo</h3>
            <div id="timelineContainer" class="timeline"></div>
        </section>
    </main>

    <!-- Bible Bot Panel -->
    <div id="botPanel" class="bot-panel hidden">
        <div class="bot-header">
            <h3>‚ö° Bible Bot</h3>
            <button id="botClose" class="close-btn">‚úï</button>
        </div>
        <div id="botContent" class="bot-content">
            <p class="bot-greeting" data-i18n="bot.greeting">Hola, soy tu gu√≠a del universo b√≠blico. ¬øEn qu√© puedo ayudarte?</p>
        </div>
        <div class="bot-input">
            <input type="text" id="botInput" placeholder="Pregunta algo..." data-i18n-placeholder="bot.placeholder">
            <button id="botSend" class="send-btn">‚Üí</button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <img src="assets/images/logo.png" alt="HolyVerse" class="footer-logo-img">
                        <h4>HolyVerse</h4>
                    </div>
                    <p data-i18n="footer.desc">Explora el universo b√≠blico de forma interactiva</p>
                </div>
                <div class="footer-section">
         Auth Modal -->
    <div id="authModal" class="hidden">
        <div class="auth-modal-content">
            <div class="auth-modal-header">
                <h2>HolyVerse</h2>
                <button id="closeAuthModal">&times;</button>
            </div>
            
            <div class="auth-tabs">
                <button id="loginTab" class="auth-tab active">Iniciar Sesi√≥n</button>
                <button id="signupTab" class="auth-tab">Crear Cuenta</button>
            </div>
            
            <!-- Login Form -->
            <form id="loginForm" class="auth-form active">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" placeholder="tu@email.com" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Contrase√±a</label>
                    <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                </div>
                <button type="submit" class="auth-submit-btn">Iniciar Sesi√≥n</button>
            </form>
            
            <!-- Signup Form -->
            <form id="signupForm" class="auth-form">
                <div class="form-group">
                    <label for="signupName">Nombre</label>
                    <input type="text" id="signupName" placeholder="Tu nombre" required>
                </div>
                <div class="form-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" placeholder="tu@email.com" required>
                </div>
                <div class="form-group">
                    <label for="signupPassword">Contrase√±a</label>
                    <input type="password" id="signupPassword" placeholder="Al menos 6 caracteres" required>
                </div>
                <button type="submit" class="auth-submit-btn">Crear Cuenta</button>
            </form>
        </div>
    </div>

    <!-- Donation Modal -->
    <div id="donationModal" class="hidden">
        <div class="donation-modal-overlay"></div>
        <div class="donation-modal-content">
            <div class="donation-modal-header">
                <h2>‚òï Apoyar HolyVerse</h2>
                <button id="closeDonationModal">&times;</button>
            </div>
            
            <div class="donation-message">
                <p>Tu apoyo nos ayuda a mantener y mejorar HolyVerse. <strong>¬°Gracias por tu generosidad! üôè</strong></p>
            </div>
            
            <div class="donation-options">
                <div class="donation-option" data-amount="1">
                    <span class="donation-amount">$1</span>
                    <span class="donation-label">Caf√©</span>
                </div>
                <div class="donation-option" data-amount="5">
                    <span class="donation-amount">$5</span>
                    <span class="donation-label">Almuerzo</span>
                </div>
                <div class="donation-option" data-amount="10">
                    <span class="donation-amount">$10</span>
                    <span class="donation-label">Cena</span>
                </div>
                <div class="donation-option" data-amount="25">
                    <span class="donation-amount">$25</span>
                    <span class="donation-label">Generoso</span>
                </div>
            </div>
            
            <div class="custom-amount-section">
                <label for="customAmount">O ingresa tu monto:</label>
                <input type="number" id="customAmount" placeholder="Monto personalizado" min="0.5" step="0.5">
            </div>
            
            <button class="donation-submit-btn" disabled>Selecciona un monto</button>
            
            <div class="donation-footer">
                <p>Las donaciones se procesan a trav√©s de <a href="https://ko-fi.com" target="_blank">Ko-fi</a></p>
                <p>Tu informaci√≥n de pago es segura y protegida.</p>
            </div>
        </div>
    </div>

    <!-- Donation Button (Floating) -->
    <button id="donationBtn" title="Apoya HolyVerse">
        <span>‚òï</span>
        <span>Apoyar</span>
    </button>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <img src="assets/images/logo.png" alt="HolyVerse" class="footer-logo-img">
                        <h4>HolyVerse</h4>
                    </div>
                    <p data-i18n="footer.desc">Explora el universo b√≠blico de forma interactiva</p>
                </div>
                <div class="footer-section">
                    <h4 data-i18n="footer.links.title">Enlaces</h4>
                    <ul>
                        <li><a href="#" onclick="scrollToTop()" data-i18n="footer.links.top">Arriba</a></li>
                        <li><a href="#" onclick="document.getElementById('searchInput').focus()" data-i18n="footer.links.search">Buscar</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p data-i18n="footer.copyright">¬© 2026 HolyVerse. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- PWA Install Button -->
    <button id="installPWA" class="hidden">
        <span>üì±</span>
        <span data-i18n="pwa.install">Instalar App</span>
    </button>

    <!-- Scripts -->
    <script src="js/i18n.js"></script>
    <script src="js/api.js"></script>
    <script src="js/bot.js"></script>
    <script src="js/bot-enhancements.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/donations.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="js/mobile-enhancements.js"></script>
    <script src="js/main.js"></script>
    
    <!-- PWA Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/holy_verse/sw.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed', err));
            });
        }
    </script>
</body>
</html>
